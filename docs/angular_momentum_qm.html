<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>asymptotic to MARS - Angular Momentum in QM</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">asymptotic to MARS</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html" rel="" target="">
 <span class="menu-text">Bried Notes</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./about.html" rel="" target="">
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./favourites.html" rel="" target="">
 <span class="menu-text">Favourites</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools ms-auto">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#what-is-angular-momentum-in-qm" id="toc-what-is-angular-momentum-in-qm" class="nav-link active" data-scroll-target="#what-is-angular-momentum-in-qm">What is angular momentum in QM?</a></li>
  <li><a href="#goal" id="toc-goal" class="nav-link" data-scroll-target="#goal">Goal</a></li>
  <li><a href="#why" id="toc-why" class="nav-link" data-scroll-target="#why">Why?</a></li>
  <li><a href="#raising-and-lowering-operators" id="toc-raising-and-lowering-operators" class="nav-link" data-scroll-target="#raising-and-lowering-operators">Raising and lowering operators</a></li>
  <li><a href="#eigenvalues-and-eigenvectors" id="toc-eigenvalues-and-eigenvectors" class="nav-link" data-scroll-target="#eigenvalues-and-eigenvectors">Eigenvalues and eigenvectors</a></li>
  <li><a href="#matrix-representation" id="toc-matrix-representation" class="nav-link" data-scroll-target="#matrix-representation">Matrix Representation</a></li>
  <li><a href="#the-orbital-angular-momentum" id="toc-the-orbital-angular-momentum" class="nav-link" data-scroll-target="#the-orbital-angular-momentum">The Orbital Angular Momentum</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Angular Momentum in QM</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="what-is-angular-momentum-in-qm" class="level2">
<h2 class="anchored" data-anchor-id="what-is-angular-momentum-in-qm">What is angular momentum in QM?</h2>
<p>Classical Angular momentum is defined as <span class="math display">\[
\mathbf{L}=\mathbf{r}\times \mathbf{p}
\]</span> In components we have for example: <span class="math display">\[
L_z=xp_y-p_yx
\]</span> To obtain the QM angular momentum we replace the positions coordinates <span class="math inline">\(x,y,z\)</span> and momentum <span class="math inline">\(p_x,p_y,p_z\)</span> by the operators <span class="math inline">\(X,Y,Z\)</span> and <span class="math inline">\(P_x,P_y,P_z\)</span>. This gives us:</p>
<p><span class="math display">\[
\mathbf{L}=\mathbf{R}\times \mathbf{P}
\]</span> where <span class="math inline">\(\mathbf{R}=(X,Y,Z)\)</span> and <span class="math inline">\(\mathbf{P}=(P_x,P_y,P_z)\)</span> are vectors whose entries are operators. From the three components of <span class="math inline">\(\mathbf{L}\)</span> we get the following commutations relations:</p>
<p><span class="math display">\[
[L_x,L_y]=i\hbar L_z\qquad [L_y,L_z]=i\hbar L_x\qquad [L_z,L_x]=i\hbar L_y\qquad [L_i,L_j]=0\quad \text{for}\ i\not= j
\]</span></p>
<p>as a consequence of <span class="math inline">\([X,P_x]=i\hbar\)</span>, etc. From a different perspective we can say that the angular momentum operators satisfy these three commutation “equations”. In QM one wants to talk about more general angular momentum, for example spin angular momentum, it has no classical analog and hence is not defined explicitly as <span class="math inline">\(\mathbf{L}=\mathbf{r}\times \mathbf{p}\)</span>. However one can still say that whatever spin angular momentum operator is, it must satisfy the previous three commutations relation. Hence we introduce a general angular momentum <span class="math inline">\(J\)</span> which obeys the rules</p>
<p><span id="eq-commut1"><span class="math display">\[
[J_x,J_y]=i\hbar J_z\qquad [J_y,J_z]=i\hbar J_x\qquad [J_z,J_x]=i\hbar J_y\qquad [J_i,J_j]=0\quad \text{for}\ i\not= j
\tag{1}\]</span></span></p>
<p><span class="math inline">\(\mathbf{J}\)</span> can be either the orbital angular momentum of a particle or the spin angular momentum etc, since all quantum angular momenta has commutation relations of that form. Given <span class="math inline">\(\mathbf{J}\)</span> we can introduce now <span class="math inline">\(J^2\)</span>, defined as:</p>
<p><span class="math display">\[
J^2=J_x^2+J_y^2+J_z^2
\]</span></p>
<p>Moreover, we can easily show that this operator commute with the three components of <span class="math inline">\(J\)</span>:</p>
<p><span id="eq-commut2"><span class="math display">\[
[J^2,J_x]=0\qquad[J^2,J_y]=0\qquad[J^2,J_z]=0
\tag{2}\]</span></span></p>
<p>for example, using <a href="#eq-commut1">Equation&nbsp;1</a> we find:</p>
<p><span class="math display">\[
\begin{align}
[J^2,J_z]&amp;=[J_x^2+J_y^2+J_z^2,J_z]\\
&amp;=[J_x^2,J_z]+[J_y^2,J_z]+[J_z^2,J_z]\\
&amp;=0+0+0\\
&amp;=0
\end{align}
\]</span></p>
<p>That fact that <span class="math inline">\(J^2\)</span> commutes with <span class="math inline">\(J_z\)</span> will be of great importance, because it guarantees one can find (and thus define) a set of basis kets in the Hilbert space that are simultaneously eigenstates of both. Moreover, since the commuting operators are Hermitian (we say in QM they are observables) the eigenstates of the operators can be made orthogonal and the eigenvalues are real. What this entails for our commuting observables, is that not only we can find a set of common eigenvectors, those can be made orthogonal and the two eigenvalues (one for <span class="math inline">\(J^2\)</span>, the other for <span class="math inline">\(J_z\)</span>) are real.</p>
</section>
<section id="goal" class="level2">
<h2 class="anchored" data-anchor-id="goal">Goal</h2>
<p>Define a basis of eigenstates common to <span class="math inline">\(J^2\)</span> and <span class="math inline">\(J_z\)</span> for our Hilbert Space.</p>
</section>
<section id="why" class="level2">
<h2 class="anchored" data-anchor-id="why">Why?</h2>
<p>One of the most important goals in QM is to find the eigenstates of the Hamiltonian of the system, paraphrased differently, we say, we want to find the <em>basis</em> of eigenstates of <span class="math inline">\(H\)</span>. Imagine we have an Hamiltonian which commutes with <span class="math inline">\(J^2\)</span> and <span class="math inline">\(J_z\)</span>, then we know we can find a basis of eigenstates common to the three operators. Knowing already what is the eigenbasis common to <span class="math inline">\(\{J^2,J_z\}\)</span> greatly facilitates finding the eigenstates of <span class="math inline">\(H\)</span>. The three operators (observables) constitute a complete set of commuting observables (CSCO) <span class="math display">\[
\{H,J^2,J_z\}
\]</span> and we want to find its eigenbasis.</p>
</section>
<section id="raising-and-lowering-operators" class="level2">
<h2 class="anchored" data-anchor-id="raising-and-lowering-operators">Raising and lowering operators</h2>
<p>By definition we have: <span class="math display">\[
J_+=J_x+iJ_y\qquad J_-=J_x-iJ_y\qquad
\]</span> There are now plenty commutations relations we can derive from these two operators in conjunction with the <span class="math inline">\(J^2\)</span> and <span class="math inline">\(J\)</span>, but the ultimate consequences of these relations is that they tell us how to organize the eigenbasis of <span class="math inline">\(\{J^2,J_z\}\)</span>, see next section and <a href="#fig-Ejs">Figure&nbsp;1</a> .</p>
<p>These definitions allow us to write:</p>
<p><span id="eq-JxJyintermsoflowerandraise"><span class="math display">\[
J_x = \frac{1}{2}(J_++J_-) \qquad J_y = \frac{1}{2i}(J_+-J_-)
\tag{3}\]</span></span></p>
<p>which will be useful later.</p>
</section>
<section id="eigenvalues-and-eigenvectors" class="level2">
<h2 class="anchored" data-anchor-id="eigenvalues-and-eigenvectors">Eigenvalues and eigenvectors</h2>
<p>The eigenvalues of <span class="math inline">\(J^2\)</span> are of the form <span class="math inline">\(j(j+1)\hbar^2\)</span> and those of <span class="math inline">\(J_z\)</span> are <span class="math inline">\(m\hbar\)</span> where <span class="math inline">\(j\)</span> is a positive integer or semi-integer and <span class="math inline">\(-j\leq m\leq j\)</span> in steps of <span class="math inline">\(1\)</span>. We use the <span class="math inline">\(j\)</span> and <span class="math inline">\(m\)</span> to label the eigenbasis:</p>
<p><span id="eq-J2andJzevalevecteqn"><span class="math display">\[
\begin{align}&amp;J^2\ket{n,j,m}=j(j+1)\hbar^2\ket{n,j,m}\\&amp;J_z\ket{n,j,m}=m\hbar\ket{n,j,m}\end{align}
\tag{4}\]</span></span></p>
<p>The only values that <span class="math inline">\(j\)</span> can take are <span class="math inline">\(0\)</span>, <span class="math inline">\(1/2\)</span>, <span class="math inline">\(3/2\)</span>, <span class="math inline">\(2\)</span>, etc; while <span class="math inline">\(n\)</span> can either be an integer or a continuous number that we use to label and thus distinguish the kets in the basis.</p>
<div id="fig-Ejs" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="figs/eigenspaces of J2 and Jz.png" class="img-fluid figure-img" width="421"></p>
<figcaption class="figure-caption">Figure&nbsp;1: Eigenspaces for various values of j and a specific value of n.</figcaption>
</figure>
</div>
<p>Each blue dot in the picture corresponds to basis vector <span class="math inline">\(\ket{n,j,m}\)</span>, the horizontal boxes show subspaces <span class="math inline">\(\mathcal{E}(n,j)\)</span> of the Hilbert space. From a different perspective we have:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="figs/3D eigenspaces of J2 and Jz.png" class="img-fluid figure-img" width="605"></p>
<figcaption class="figure-caption">Eigenspace for j=1 and the slice for n=1. (n=0,1,2,…)</figcaption>
</figure>
</div>
<p>Within each one of these, the operators <span class="math inline">\(J_\pm\)</span> links each vector of the basis, specifically we have:</p>
<p><span id="eq-Jplusminus"><span class="math display">\[
J_\pm \ket{n,j,m}=\hbar \sqrt{j(j+1)-m(m\pm 1)}\ket{n,j,m\pm 1}
\tag{5}\]</span></span></p>
<p>a formula which is derived from commutation relations (through a rather complicated path). The names raising and lowering operators comes form the fact that <span class="math inline">\(m\)</span> is either raised by <span class="math inline">\(+1\)</span> or lowered by <span class="math inline">\(-1\)</span> each time <span class="math inline">\(J_\pm\)</span> acts.</p>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Observe
</div>
</div>
<div class="callout-body-container callout-body">
<p>From the first equation in <a href="#eq-J2andJzevalevecteqn">Equation&nbsp;4</a> we notice that for a given value of <span class="math inline">\(n\)</span> and <span class="math inline">\(j\)</span>, for example <span class="math inline">\(n=1\)</span> and <span class="math inline">\(j=1\)</span>, then <span class="math inline">\(\{|1,1,1\rangle,|1,1,0\rangle,|1,1,-1\rangle\}\)</span> are eigenvectors of <span class="math inline">\(J^2\)</span> with the same eigenvalue <span class="math inline">\(1(1+1)\hbar^2\)</span> , we therefore say the eigenvalue is 3-degenate, or that the space <span class="math inline">\(\mathcal{E}(n=1,j=1)\)</span> spanned by this basis is 3-degenerate. We distinguish the 3 eigenvectors by the <span class="math inline">\(J_z\)</span> eigenvalue <span class="math inline">\(m\hbar\)</span>.</p>
</div>
</div>
</section>
<section id="matrix-representation" class="level2">
<h2 class="anchored" data-anchor-id="matrix-representation">Matrix Representation</h2>
<p>To compute the matrix representation of an operator we have to compute how the operator acts on the space basis. For example, let us choose the subspace of eigenvectors of <span class="math inline">\(J^2\)</span> with eigenvalue <span class="math inline">\(1(1+1)\hbar^2\)</span> and a given <span class="math inline">\(n\)</span>:</p>
<p><span class="math display">\[
\mathcal{E}(n,l=1)=\text{span}\{|n,1,1\rangle,|n,1,0\rangle,|n,1,-1\rangle\}
\]</span></p>
<p>see <a href="#fig-Ejs">Figure&nbsp;1</a> .</p>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Change of notation
</div>
</div>
<div class="callout-body-container callout-body">
<p>We drop the <span class="math inline">\(n\)</span> index for easier read of the formulas. Later we will recover it.</p>
</div>
</div>
<p>When we act with <span class="math inline">\(J_x\)</span> on this basis, what is the output? Answer:</p>
<p><span id="eq-Jx11"><span class="math display">\[
\begin{align}
J_x|1,1\rangle &amp;= \frac{1}{2}(J_+ +J_-)|1,1\rangle\\
&amp;=\frac{1}{2}J_+|1,1\rangle+\frac{1}{2}J_-|1,1\rangle\\
&amp;=\frac{\hbar}{2}\sqrt{1(1+1)-1(1+1)}|1,2\rangle+\frac{\hbar}{2}\sqrt{1(1+1)-1(1-1)}|1,0\rangle\\
&amp;=\frac{\hbar}{\sqrt{2}}|1,0\rangle
\end{align}
\tag{6}\]</span></span></p>
<p>We conclude that when <span class="math inline">\(J_x\)</span> acts on the basis element <span class="math inline">\(|1,1\rangle\)</span> it outputs <span class="math inline">\(|1,0\rangle\)</span> times a constant, notice the ket $|1,0\rangle $ lives in <span class="math inline">\(\mathcal{E}(j=1)\)</span>. Let us see now what happens when <span class="math inline">\(J_x\)</span> acts on <span class="math inline">\(|1,0\rangle\)</span>:</p>
<p><span id="eq-Jx10"><span class="math display">\[
\begin{align}
J_x|1,0\rangle &amp;= \frac{1}{2}(J_++J_-)|1,0\rangle\\
&amp;=\frac{\hbar}{2}\sqrt{1(1+1)-0(0+1)}|1,1\rangle+\frac{\hbar}{2}\sqrt{1(1+1)-0(0-1)}|1,1\rangle|1,-1\rangle\\
&amp;=\frac{\hbar}{\sqrt{2}}(|1,1\rangle+|1,-1\rangle)
\end{align}
\tag{7}\]</span></span></p>
<p>As <span class="math inline">\(J_x\)</span> acts on <span class="math inline">\(|1,0\rangle\)</span> it gives a linear combination <span class="math inline">\(|1,1\rangle+|1,-1\rangle\)</span> of basis vectors, which in turn also lives in <span class="math inline">\(\mathcal{E}(j=1)\)</span>.</p>
<p>And finally,a similar calculation would show:</p>
<p><span id="eq-Jx1minus1"><span class="math display">\[
J_x|1,-1\rangle =\frac{\hbar}{\sqrt{2}}|1,0\rangle
\tag{8}\]</span></span></p>
<p>Again, the input <span class="math inline">\(|1,-1\rangle\)</span> is in <span class="math inline">\(\mathcal {E}(j=1)\)</span> and so is the output <span class="math inline">\(|1,0\rangle\)</span>.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Observation
</div>
</div>
<div class="callout-body-container callout-body">
<p>The calculation above show clearly that the action of <span class="math inline">\(J_x\)</span> is stuck in <span class="math inline">\(\mathcal{E}(j=1)\)</span>, confirming the prediction already made from the fact that <span class="math inline">\([J^2,J_x]=0\)</span>.</p>
</div>
</div>
<p>The results in <a href="#eq-Jx11">Equation&nbsp;6</a>, <a href="#eq-Jx10">Equation&nbsp;7</a> and <a href="#eq-Jx1minus1">Equation&nbsp;8</a> allow us to write:</p>
<p><span class="math display">\[
J_x = \sum_{m,m'=1,0,-1}|1,m\rangle\langle1,m|J_x|1,m'\rangle\langle1,m'|
\]</span></p>
<p>explicitly as</p>
<p><span class="math display">\[
\begin{align}
J_x &amp;= \frac{\hbar}{\sqrt{2}}\left(|1,0\rangle\langle 1,1|+|1,1\rangle\langle 1,0|+|1,-1\rangle\langle 1,0|+|1,0\rangle\langle 1,-1|\right)
\end{align}
\]</span></p>
<p>which in turn can be rewritten using using matrix notation as:</p>
<p><img src="figs/Jx representation.png" class="img-fluid" width="295"></p>
<p>Repeating these calculation for <span class="math inline">\(J_y\)</span> and <span class="math inline">\(J_z\)</span> yields the results:</p>
<p><img src="figs/Jy Jz representation.png" class="img-fluid"></p>
<p>The matrix for <span class="math inline">\(J_z\)</span> is diagonal since the basis elements we choose are eigenvectors, the diagonal elements are the the three <span class="math inline">\(m\hbar\)</span> eigenvalues; and since they are also eigenvectors of <span class="math inline">\(J^2\)</span> we find a diagonal with the <span class="math inline">\(1(1+1)\hbar^2=2\hbar^2\)</span> eigenvalues repeated three times:</p>
<p><img src="figs/J2 representation.png" class="img-fluid" width="298"></p>
<p>All of above assume a given index <span class="math inline">\(n\)</span> was chosen.</p>
</section>
<section id="the-orbital-angular-momentum" class="level2">
<h2 class="anchored" data-anchor-id="the-orbital-angular-momentum">The Orbital Angular Momentum</h2>
<p>So far we described the framework of a generic angular momentum, which followed solely from its commutation relations; we want now to see a particular example of the <span class="math inline">\(J^2\)</span> and <span class="math inline">\(J_z\)</span> operators, namely, when they are the magnitude-squared of the orbital angular momentum of a particle and its z-component, to be explicit, let:</p>
<p><span id="eq-L2andLz"><span class="math display">\[
\begin{align}
&amp;J_x := YP_z-ZP_y\\
&amp;J_y:=ZP_x-XP_z\\
&amp;J_z:= XP_y-YP_x \\
&amp;J^2:=J_x^2+J_y^2+J_z^2
\end{align}
\tag{9}\]</span></span></p>
<p>The commutation relations <a href="#eq-commut1">Equation&nbsp;1</a> and <a href="#eq-commut2">Equation&nbsp;2</a> that we assumed in previous sections for the symbols on the lhs of <a href="#eq-L2andLz">Equation&nbsp;9</a> also hold for the symbols on the rhs</p>
<p>In other words, the explicit form of <span class="math inline">\(J_x\)</span>, <span class="math inline">\(J_y\)</span> and <span class="math inline">\(J_z\)</span> that we defined in <a href="#eq-L2andLz">Equation&nbsp;9</a>, by itself satisfies <a href="#eq-commut1">Equation&nbsp;1</a> and <a href="#eq-commut2">Equation&nbsp;2</a> provided:</p>
<p><span class="math display">\[
[X,P_x] = [Y,P_y] = [Z,P_z]=i\hbar
\]</span></p>
<p>As an example:</p>
<p><span id="eq-checkingitcommuts"><span class="math display">\[
\begin{align}
[J_x,J_y]&amp;=[YP_z-ZP_y,ZP_x-XP_z]\\
&amp;=[YP_z,ZP_x]-[YP_z,XP_z]-[ZP_y,ZP_x]+[ZP_y,XP_z]\\
&amp;=Y[P_z,Z]P_x -0-0+X[Z,P_z]P_y\\
&amp;=-i\hbar YP_x+i\hbar XP_y\\
&amp;=i\hbar (XP_y-YP_x)\\
&amp;=i\hbar J_z
\end{align}
\tag{10}\]</span></span></p>
<p>just as we assumed in <a href="#eq-commut1">Equation&nbsp;1</a> . Analogous calculation show our definitions satisfies the remaining commutation relations</p>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Change of Notation
</div>
</div>
<div class="callout-body-container callout-body">
<p>It is traditional to use the symbols <span class="math inline">\(L_x\)</span>, <span class="math inline">\(L_y\)</span> ,<span class="math inline">\(L_z\)</span> and <span class="math inline">\(L^2\)</span> in place of <span class="math inline">\(J_x\)</span>, <span class="math inline">\(J_y\)</span> ,<span class="math inline">\(J_z\)</span> and <span class="math inline">\(J^2\)</span> when speaking about the orbital angular momentum. Recall the former notation is used for a generic angular momentum, not necessarily the orbital one.</p>
</div>
</div>
<p>The rhs of <a href="#eq-L2andLz">Equation&nbsp;9</a> together with the choice of the position basis <span class="math inline">\(\{|x,y,z\rangle\}\)</span> allow us to give the position representation of the eigenvalue-eigenvector equations we saw in <a href="#eq-J2andJzevalevecteqn">Equation&nbsp;4</a>:</p>
<p><span id="eq-L2andLzevalsandevectinrrepresentation"><span class="math display">\[
\begin{align}
&amp;\langle x,y,z|L^2\ket{l,m}=l(l+1)\hbar^2\langle x,y,z|\ket{l,m}\\
&amp;\langle x,y,z|L_z\ket{l,m}=m\hbar\langle x,y,z|\ket{l,m}
\end{align}
\tag{11}\]</span></span></p>
<p>Substituting <a href="#eq-L2andLz">Equation&nbsp;9</a> we find:</p>
<p><span id="eq-L2andLzevalsandevectinrrepresentation3"><span class="math display">\[
\begin{align}&amp;\langle x,y,z|(L_x^2+L_y^2+L_z^2)\ket{l,m}=l(l+1)\hbar^2\langle x,y,z|\ket{l,m}\\
&amp;\langle x,y,z|(XP_y-YP_x)\ket{l,m}=m\hbar\langle x,y,z|\ket{l,m}\end{align}
\tag{12}\]</span></span></p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Recall
</div>
</div>
<div class="callout-body-container callout-body">
<p>The <span class="math inline">\(X\)</span> and <span class="math inline">\(P_x\)</span> operators have the following representation in the <span class="math inline">\(\{|x\rangle\}\)</span> basis:</p>
<p><span class="math display">\[
\langle x|X|\psi\rangle = x\langle x|\psi\rangle \qquad \langle x|P_x|\psi\rangle = \frac{\hbar}{i}\frac{\partial}{\partial x}\langle x|\psi\rangle
\]</span></p>
</div>
</div>
<p>The second equation in <a href="#eq-L2andLzevalsandevectinrrepresentation3">Equation&nbsp;12</a> we find:</p>
<p><span class="math display">\[
\begin{align}
\langle x,y,z|L_z|\psi\rangle &amp;= \langle x,y,z|(XP_y-YP_x)|\psi\rangle\\
&amp;= \langle x,y,z|(xP_y-yP_x)|\psi\rangle\\
&amp;= \langle x,y,z|(x\frac{\hbar}{i}\frac{\partial}{\partial y}-y\frac{\hbar}{i}\frac{\partial}{\partial x})|\psi\rangle\\
&amp;= \frac{\hbar}{i}\left(x\frac{\partial}{\partial y}-y\frac{\partial}{\partial x}\right)\langle x,y,z|\psi\rangle\\
&amp;= \frac{\hbar}{i}\left(x\frac{\partial}{\partial y}-y\frac{\partial}{\partial x}\right)\psi(x,y,z)
\end{align}
\]</span> Therefore, in the position basis, the <span class="math inline">\(L_z\)</span> operator acts on functions <span class="math inline">\(\psi(x,y,z)\)</span> as the operation:</p>
<p><span id="eq-LzinCartesian"><span class="math display">\[
L_z \rightsquigarrow \frac{\hbar}{i}\left(x\frac{\partial}{\partial y}-y\frac{\partial}{\partial x}\right)
\tag{13}\]</span></span></p>
<p>Similarly we find:</p>
<p><span id="eq-LxLyinCartesian"><span class="math display">\[
L_x \rightsquigarrow \frac{\hbar}{i}\left(y\frac{\partial}{\partial z}-z\frac{\partial}{\partial y}\right) \qquad L_y \rightsquigarrow \frac{\hbar}{i}\left(z\frac{\partial}{\partial x}-x\frac{\partial}{\partial z}\right)
\tag{14}\]</span></span></p>
<p>We could substitute the rhs of <a href="#eq-LzinCartesian">Equation&nbsp;13</a> and <a href="#eq-LxLyinCartesian">Equation&nbsp;14</a> into the commutation relations and run an analogous calculation to <a href="#eq-checkingitcommuts">Equation&nbsp;10</a>, the would conclude that they indeed satisfy those equations as well.</p>
<p>It will be useful to change from cartesian coordinates <span class="math inline">\(x,y,z\)</span> into polar coordinates <span class="math inline">\(r,\theta,\phi\)</span>. The map between these coordinates is established by the equations:</p>
<p><span class="math display">\[
\begin{align}
&amp; x = r \sin \theta \cos \phi\\
&amp; y = r \sin \theta \sin \phi\\
&amp; z = r \cos \theta
\end{align}
\]</span></p>
<p>provided <span class="math inline">\(r\geq 0\)</span>, <span class="math inline">\(0\leq\theta\leq\pi\)</span> and <span class="math inline">\(0\leq\phi&lt; 2\pi\)</span></p>
<p>To convert <a href="#eq-LzinCartesian">Equation&nbsp;13</a> and <a href="#eq-LxLyinCartesian">Equation&nbsp;14</a> into polar coordinates we proceed as follows:</p>
<ol type="1">
<li>Draw a diagram:</li>
</ol>
<p><img src="figs/psixyzpolar.png" class="img-fluid" width="228"></p>
<ol start="2" type="1">
<li>Relate the derivatives in cartesian and polar coordinates encoded in the diagram:</li>
</ol>
<p><span id="eq-systemofeqnstoinvert"><span class="math display">\[
\begin{pmatrix}
\partial_r\psi\\
\partial_\theta\psi\\
\partial_\phi\psi
\end{pmatrix}
=
\begin{pmatrix}
\partial_r x &amp; \partial_r y &amp; \partial_r z\\
\partial_\theta x &amp; \partial_\theta y &amp; \partial_\theta z\\
\partial_\phi x &amp; \partial_\phi y &amp; \partial_\phi z
\end{pmatrix}
\begin{pmatrix}
\partial_x\psi\\
\partial_y \psi\\
\partial_z \psi
\end{pmatrix}
\tag{15}\]</span></span></p>
<ol start="3" type="1">
<li>Compute the matrix (Easy)</li>
</ol>
<p><span class="math display">\[
\begin{pmatrix}
\sin\theta \cos\phi &amp; \sin\theta \sin \phi &amp; \cos\theta\\
r \cos\theta \cos\phi &amp; r \cos\theta \sin \phi &amp; -r \sin \theta\\
-r\sin\theta \sin \phi &amp; r \sin\theta \cos\phi &amp; 0
\end{pmatrix}
\]</span></p>
<ol start="4" type="1">
<li>Invert the system <a href="#eq-systemofeqnstoinvert">Equation&nbsp;15</a> (Hard, use Mathematica)</li>
</ol>
<p><span class="math display">\[
\begin{pmatrix}
\partial_x\psi\\
\partial_y\psi\\
\partial_z\psi
\end{pmatrix}
=
\begin{pmatrix}
\sin\theta \cos \phi   &amp; r^{-1}\cos\theta \cos\phi &amp; -(r\sin\theta)^{-1} \sin\phi\\
\sin\theta \sin \phi   &amp; r^{-1}\cos\theta \sin\phi &amp; (r\sin\theta)^{-1} \cos\phi\\
\cos\theta &amp; -r^{-1}\sin\theta &amp; 0
\end{pmatrix}
\begin{pmatrix}
\partial_r\psi\\
\partial_\theta \psi\\
\partial_\phi \psi
\end{pmatrix}
\]</span></p>
<ol start="5" type="1">
<li><p>Substitute the results into <a href="#eq-LzinCartesian">Equation&nbsp;13</a> and <a href="#eq-LxLyinCartesian">Equation&nbsp;14</a> and simplify gives:</p>
<p><span class="math display">\[
\begin{align}
&amp;L_x \rightsquigarrow i\hbar\left(\sin\phi \frac{\partial}{\partial \theta}+\frac{\cos\phi}{\tan\theta} \frac{\partial}{\partial \phi}\right)\\
&amp;L_y \rightsquigarrow i\hbar\left(-\cos\phi \frac{\partial}{\partial \theta}+\frac{\sin\phi}{\tan\theta} \frac{\partial}{\partial \phi}\right)\\
&amp;Lz \rightsquigarrow \frac{\hbar}{i} \frac{\partial}{\partial \phi}
\end{align}
\]</span></p></li>
<li><p>From these results we can now derive the action of <span class="math inline">\(L^2\)</span> in polar coordinates:</p>
<p><span id="eq-L2inpolar"><span class="math display">\[
\begin{align}
L^2\psi &amp;= L_x^2\psi + L_y^2\psi+L_z^2\psi\\
&amp;=(i\hbar)^2\left(\sin\phi \frac{\partial}{\partial \theta}+\frac{\cos\phi}{\tan\theta} \frac{\partial}{\partial \phi}\right)^2\psi
+(i\hbar)^2\left(-\cos\phi \frac{\partial}{\partial \theta}+\frac{\sin\phi}{\tan\theta} \frac{\partial}{\partial \phi}\right)^2\psi+
\left(\frac{\hbar}{i}\right)^2 \frac{\partial^2}{\partial \phi^2}\psi
\end{align}
\tag{16}\]</span></span> Now we need to expand each square, the first becomes:</p></li>
</ol>
<p><span class="math display">\[
(i\hbar)^2\left(\sin^2\phi \frac{\partial^2\psi}{\partial \theta^2}+ \frac{\cos^2\phi}{\tan^2\theta}\frac{\partial^2\psi}{\partial \phi^2}-\frac{\sin\phi\cos\phi}{\sin^2\theta}\frac{\partial \psi}{\partial \phi}+\frac{\sin\phi\cos\phi}{\tan\theta}\frac{\partial^2 \psi}{\partial\theta\partial \phi}\right)
\]</span></p>
<p>the second term becomes:</p>
<p><span class="math display">\[
(i\hbar)^2\left(\cos^2\phi \frac{\partial^2\psi}{\partial \theta^2}+ \frac{\sin^2\phi}{\tan^2\theta}\frac{\partial^2\psi}{\partial \phi^2}+\frac{\cos\phi\sin\phi}{\sin^2\theta}\frac{\partial \psi}{\partial \phi}-\frac{\cos\phi\sin\phi}{\tan\theta}\frac{\partial^2 \psi}{\partial\theta\partial \phi}\right)
\]</span></p>
<p>Substituting into <a href="#eq-L2inpolar">Equation&nbsp;16</a> and canceling terms yields the final result:</p>
<p><span id="eq-L2inPolarFinal"><span class="math display">\[
L^2 \rightsquigarrow -\hbar^2\left(\frac{\partial^2}{\partial \theta^2} + \frac{1}{\sin^2\theta} \frac{\partial^2}{\partial \phi^2} + \frac{1}{\tan\theta}\frac{\partial}{\partial \theta}\right)
\tag{17}\]</span></span></p>
<p>As a consequence, the system of equations in <a href="#eq-L2andLzevalsandevectinrrepresentation3">Equation&nbsp;12</a> becomes a system of partial differential equations:</p>
<p><span id="eq-L2andLzevalsandevectinrrepresentation2"><span class="math display">\[
\begin{align}
&amp;-\hbar^2 \left(\frac{\partial}{\partial \theta^2}+\frac{1}{\tan \theta} \frac{\partial}{\partial \theta}+\frac{1}{\sin^2\theta}\frac{\partial}{\partial^2 \phi^2}\right)\psi_{l,m}(r, \theta, \phi)=l(l+1)\hbar^2\psi_{l,m}(r, \theta, \phi)\\
&amp; \frac{\hbar}{i} \frac{\partial}{\partial \phi}\psi_{l,m}(r, \theta, \phi)=m\hbar \psi_{l,m}(r, \theta, \phi)
\end{align}
\tag{18}\]</span></span></p>
<p>The solutions <span class="math inline">\(\psi_{l,m}(r,\theta,\phi)\)</span> are the eigenfunctions common to the <span class="math inline">\(L^2\)</span> and <span class="math inline">\(L_z\)</span> operators associated with the eigenvalues <span class="math inline">\(l(l+1)\hbar^2\)</span> and <span class="math inline">\(m\hbar\)</span>. These solution exist because these two operators commute. Our ultimate goal is to solve them, but in these notes we’ll content ourselves by just identifying some of its properties.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>